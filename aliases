##
# for unix
##

alias ec="emacsclient"

alias l="COLUMNS=12 ls -GFh"
alias lm="ls -mF"
alias ls="ls -GhF"
alias ll="ls -lGhF"
alias la="ls -laGhF"
alias dir="ls -asGhF"
alias tree="ls -R | grep ":$" | sed -e 's/:$//' -e 's/[^-][^\/]*\//--/g' -e 's/^/   /' -e 's/-/|/'"

alias du="du -hsk"
alias dis="du -sk ./"

alias de="date '+%Y%m%d'"
alias dbtime="date \"+%Y%m%d%H%M%S\""

alias pwdcp="pwd | pbcopy"
alias conns="sudo lsof -i"
alias woman="man"
alias makejobs="grep '[a-z]+\:' Makefile"
alias ctags="/usr/local/bin/ctags"

alias mksecure="hdiutil create -agentpass -encryption AES-256 -megabytes 256 -fs HFS+ -volname $1 ~/Desktop/$1"

##
# for ruby
##

alias rb='rbenv'
alias re='rbenv exec'
alias rh='rbenv rehash'
alias ri='rbenv install'
alias rl='rbenv install --list'

alias run="ruby -run -e httpd $(pwd) -p $1"

alias fl="find . -name \*.rb | xargs flog"
alias rrg="bin/rake routes | grep $1"
alias curlx='curl -v -H "X_REQUESTED_WITH: XMLHttpRequest"'
alias rake='noglob rake'
alias v="vagrant"
alias vbox='VBoxManage'
alias lc='bin/librarian-chef'
alias t="bin/turn"
alias c="bin/cucumber"
alias b="bundle"
alias k="bin/knife"
alias dbag="bin/knife data bag show"
alias ebag="bin/knife data bag show --secret-file $(pwd)/.chef/data_bag_key"
alias story='git log --oneline -n 1 | grep -o "\[.*\]" | tr -d "\n" | pbcopy'
alias cheat="rbenv exec cheat"

alias gll="gem search -l | sed 's/(.*)\(.*\)/ /' | sed '/./!d' | sed '/^.*LOCAL.*$/d'"
alias gup="gem update $1 --no-ri --no-rdoc"
alias gun="gem uninstall $1"
alias gis="gem install $1 --no-ri --no-rdoc"
alias gsl="gem search $1 -l"
alias gsr="gem search $1 -r"

##
# for postgres
##

export __ptf_sql="SELECT table_name, pg_size_pretty(table_size) AS table_size, pg_size_pretty(indexes_size) AS indexes_size, pg_size_pretty(total_size) AS total_size FROM (SELECT table_name, pg_table_size(table_name) AS table_size, pg_indexes_size(table_name) AS indexes_size, pg_total_relation_size(table_name) AS total_size FROM (SELECT ('\"' || table_schema || '\".\"' || table_name || '\"') AS table_name FROM information_schema.tables) AS all_tables ORDER BY total_size DESC) AS pretty_sizes;"

alias pdf="psql postgres -c 'SELECT pg_database.datname, pg_size_pretty(pg_database_size(pg_database.datname)) AS size FROM pg_database;'"
alias ptf="psql postgres -c '$__ptf_sql'"
alias pps="psql postgres -c 'SELECT * FROM pg_stat_activity;'"

##
# for darwin
##

alias fdns="dscacheutil -flushcache"
alias psg="ps aux | grep $1"

if [ $platform = "osx" ]; then
  alias psm="ps auxm | head"
elif [ $platform = "linux" ]; then
  alias psm="ps aux --sort -rss | head"
fi

alias allcron="for user in $(cut -f1 -d: /etc/passwd); do sudo crontab -u $user -l; done"

##
# one love
##

alias groovesalad="mpg123 -Cq http://ice.somafm.com/groovesalad"
alias cliqhop="mpg123 -Cq http://ice.somafm.com/cliqhop"
alias beatblender="mpg123 -Cq http://ice.somafm.com/beatblender"
alias spacestation="mpg123 -Cq http://ice.somafm.com/spacestation"
alias missioncontrol="mpg123 -Cq http://ice.somafm.com/missioncontrol"
alias secretagent="mpg123 -Cq http://ice.somafm.com/secretagent"
alias christmas="mpg123 -Cq http://ice.somafm.com/christmas"
alias dronezone="mpg123 -Cq http://ice.somafm.com/dronezone"

##
# for aws
##

#alias ec2vol="ec2-describe-volumes | grep $1 | cut -f3"
